<Files "index.html">
    # Preload assets for app shell/core functionality
    # Note: only works when deployed on server at root level
    Header add Link "</js/inline.js>; rel=preload; as=script"
    Header add Link "</css/calc.css>; rel=preload; as=style"
    Header add Link "</js/calc.js>; rel=preload; as=script"
    # "Non-core" but expected to load with any request-features below
    # Game selector
    Header add Link "</js/games.js>; rel=preload; as=script"
    Header add Link "</css/games.css>; rel=preload; as=style"
    Header add Link "</games.json>; rel=preload; as=fetch; crossorigin"
    Header add Link "</img/fa-gamepad.svg>; rel=preload; as=fetch; crossorigin"
    Header add Link "</img/md-check_box.svg>; rel=preload; as=fetch; crossorigin"
    Header add Link "</img/md-radio_button.svg>; rel=preload; as=fetch; crossorigin"
    # Menu
    Header add Link "</js/menu.js>; rel=preload; as=script"
    Header add Link "</css/menu.css>; rel=preload; as=style"
    Header add Link "</img/md-more_vert.svg>; rel=preload; as=fetch; crossorigin"
    # Lack of About dialog app icon is intentional
    # Target BPM
    Header add Link "</js/targetbpm.js>; rel=preload; as=script"
    Header add Link "</css/targetbpm.css>; rel=preload; as=style"
    Header add Link "</img/md-music_note.svg>; rel=preload; as=fetch; crossorigin"
    Header add Link "</img/np-target.svg>; rel=preload; as=fetch; crossorigin"
    # Lack of dark mode toggle script is intentional
    # Lack of update checker script is intentional
</Files>

<FilesMatch "\.html$">
    # Security headers as recommended by securityheaders.com
    Header always set Content-Security-Policy "\
default-src 'self'; \
style-src 'self' 'sha256-gQRWXhVM4X7h9Gmz0EcgOJ3hER5eL5aqQomYcTkGZWg=' https://fonts.googleapis.com; \
font-src https://fonts.gstatic.com; \
object-src 'none'; \
"

    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin"

    Header always set Feature-Policy "\
vibrate 'self'; \
geolocation 'none'; \
microphone 'none'; \
camera 'none'; \
autoplay 'none'; \
payment 'none'; \
"
</FilesMatch>

Header set Cache-Control "public, max-age=600, s-maxage=86400"
Header always set X-Content-Type-Options "nosniff"
Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"